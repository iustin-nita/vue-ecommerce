webpackJsonp([1],{NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a,o,n=r("/5sW"),i=r("woOf"),c=r.n(i),u=r("NYxO"),d=r("bOdI"),l=r.n(d),m=r("Dd8w"),p=r.n(m),v=(s={},l()(s,"ALL_PRODUCTS",function(t){t.showLoader=!0}),l()(s,"ALL_PRODUCTS_SUCCESS",function(t,e){t.showLoader=!1,t.products=e}),l()(s,"PRODUCT_BY_ID",function(t){t.showLoader=!0}),l()(s,"PRODUCT_BY_ID_SUCCESS",function(t,e){t.showLoader=!1,t.product=e}),l()(s,"ADD_PRODUCT",function(t,e){t.showLoader=!0}),l()(s,"ADD_PRODUCT_SUCCESS",function(t,e){t.showLoader=!1,t.products.push(e)}),l()(s,"UPDATE_PRODUCT",function(t,e){t.showLoader=!0}),l()(s,"UPDATE_PRODUCT_SUCCESS",function(t,e){t.showLoader=!1,t.products=t.products.map(function(r){return r._id===e._id?p()({},e,{manufacturer:t.manufacturers.filter(function(t){return t._id===e.manufacturer})[0]}):r})}),l()(s,"REMOVE_PRODUCT",function(t,e){t.showLoader=!0}),l()(s,"REMOVE_PRODUCT_SUCCESS",function(t,e){t.showLoader=!1;var r=t.products.findIndex(function(t){return t._id===e});console.debug("index",r),t.products.splice(r,1)}),s),_=(a={},l()(a,"ADD_TO_CART",function(t,e){return t.cart.push(e)}),l()(a,"REMOVE_FROM_CART",function(t,e){var r=t.cart.findIndex(function(t){return t._id===e});t.cart.splice(r,1),console.log(t.cart,t.cart.length,r)}),a),f=(o={},l()(o,"ALL_MANUFACTURER",function(t){t.showLoader=!0}),l()(o,"ALL_MANUFACTURER_SUCCESS",function(t,e){t.showLoader=!1,t.manufacturers=e}),o),h=r("mtWM"),C=r.n(h),g="http://localhost:3001/api/v1",P={allProducts:function(t){var e=t.commit;e("ALL_PRODUCTS"),C.a.get(g+"/products").then(function(t){e("ALL_PRODUCTS_SUCCESS",t.data)})},productById:function(t,e){var r=t.commit;r("PRODUCT_BY_ID"),C.a.get(g+"/products/"+e).then(function(t){r("PRODUCT_BY_ID_SUCCESS",t.data)})},addProduct:function(t,e){var r=t.commit;r("ADD_PRODUCT"),C.a.post(g+"/products",e).then(function(t){console.log(t),r("ADD_PRODUCT_SUCCESS",t.data)})},updateProduct:function(t,e){var r=t.commit;r("UPDATE_PRODUCT"),C.a.put(g+"/products/"+e._id,e).then(function(t){r("UPDATE_PRODUCT_SUCCESS",t.data)})},removeProduct:function(t,e){var r=t.commit;r("REMOVE_PRODUCT"),C.a.delete(g+"/products/"+e,e).then(function(t){console.debug("response",t.data),r("REMOVE_PRODUCT_SUCCESS",t.data)})}},w={allManufacturers:function(t){var e=t.commit;e("ALL_MANUFACTURER"),C.a.get(g+"/manufacturers").then(function(t){e("ALL_MANUFACTURER_SUCCESS",t.data)})}};n.a.use(u.a);var U=new u.a.Store({strict:!0,state:{cart:[],showLoader:!1,product:{},products:[],manufacturers:[]},getters:c()({},{allProducts:function(t,e){return t.products},productById:function(t,e){return function(r){return e.allProducts.length>0?e.allProducts.filter(function(t){return t._id===r})[0]:t.product}}},{allManufacturers:function(t){return t.manufacturers}}),mutations:c()({},v,_,f),actions:c()({},P,w)}),R=r("sUu7"),E=r("vQJi"),$=r.n(E),S={name:"app",data:function(){return{cartItems:this.$store.state.cart}},created:function(){this.$store.subscribe(function(t){if(t.payload)switch(t.type){case"ERROR_MSG":$.a.error(t.payload.content,t.payload.title);break;case"ADD_PRODUCT_SUCCESS":$.a.success("Product created.","Success!");break;case"UPDATE_PRODUCT_SUCCESS":$.a.success("Product updated.","Success!");break;case"REMOVE_PRODUCT_SUCCESS":$.a.warning("Product deleted.","Deleted!")}})},computed:{cartItemsCount:function(){return this.cartItems.length},showLoader:function(){return this.$store.state.showLoader}}},D={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("nav",[r("div",{staticClass:"container"},[r("ul",{staticClass:"nav__left"},[r("li",[r("router-link",{attrs:{to:"/"}},[r("i",{staticClass:"fa fa-home"}),t._v(" Home")])],1),t._v(" "),r("li",[r("router-link",{attrs:{to:"/admin"}},[r("i",{staticClass:"fa fa-user"}),t._v(" Admin")])],1)]),t._v(" "),r("ul",{staticClass:"nav__right"},[r("li",[r("router-link",{attrs:{to:"/cart"}},[r("i",{staticClass:"fa fa-shopping-cart"}),t._v(" Cart ("+t._s(t.cartItemsCount)+")")])],1)])])]),t._v(" "),r("router-view"),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoader,expression:"showLoader"}],staticClass:"overlay"},[t._m(0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-spinner"},[e("div",{staticClass:"dot dotOne"}),this._v(" "),e("div",{staticClass:"dot dotTwo"}),this._v(" "),e("div",{staticClass:"dot dotThree"})])}]};var x=r("VU/8")(S,D,!1,function(t){r("WlOm")},null,null).exports,O=r("/ocq"),T={props:["product"],data:function(){return{cart:this.$store.state.cart}},computed:{isAdding:function(){return this.cart.indexOf(this.product)<0}},methods:{addToCart:function(){this.$store.commit("ADD_TO_CART",this.product)},removeFromCart:function(t){this.$store.commit("REMOVE_FROM_CART",t)}}},A={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isAdding?r("button",{staticClass:"button",on:{click:t.addToCart}},[r("i",{staticClass:"fa fa-cart-plus"}),t._v(" Add to Cart\n  ")]):r("button",{staticClass:"button button-danger",on:{click:function(e){t.removeFromCart(t.product._id)}}},[r("i",{staticClass:"fa fa-trash"}),t._v(" Remove from Cart\n  ")])])},staticRenderFns:[]},b=r("VU/8")(T,A,!1,null,null,null).exports,L={name:"product-item",props:["product"],components:{"product-button":b}},N={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},[r("div",{staticClass:"product"},[r("router-link",{staticClass:"product-link",attrs:{to:"/details/"+t.product._id}},[r("div",{staticClass:"product__image"},[r("img",{staticClass:"img-fluid",attrs:{src:t.product.image,alt:""}})]),t._v(" "),r("div",{staticClass:"product__description"},[r("div",{staticClass:"product__info"},[r("small",[t._v(t._s(t.product.manufacturer.name))]),t._v(" "),r("h4",[t._v(t._s(t.product.name))])]),t._v(" "),r("div",{staticClass:"product__price-cart"},[t._v("\n          $"+t._s(t.product.price)+"\n        ")])])]),t._v(" "),r("div",{staticClass:"product__action"},[r("product-button",{attrs:{product:t.product}})],1)],1)])},staticRenderFns:[]},y={name:"product-list",created:function(){0===this.products.length&&this.$store.dispatch("allProducts")},computed:{products:function(){return this.$store.getters.allProducts}},components:{"product-item":r("VU/8")(L,N,!1,null,null,null).exports}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"products"},[e("div",{staticClass:"container"},[this._l(this.products,function(t){return[e("product-item",{key:t.id,attrs:{product:t}})]})],2)])])},staticRenderFns:[]},V={name:"home",components:{"product-list":r("VU/8")(y,M,!1,null,null,null).exports}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("product-list")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h1",[e("i",{staticClass:"fa fa-braille"}),this._v(" In Stock")])])}]},I=r("VU/8")(V,F,!1,null,null,null).exports,k={props:["product"],components:{"product-button":b}},q={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-details"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row pt-5"},[r("div",{staticClass:"col-lg-7 col-md-8 col-sm-10 col-xs-12 mx-auto product-details__image"},[r("img",{staticClass:"img-fluid",attrs:{src:t.product.image,alt:""}}),t._v(" "),r("div",{staticClass:"product-details__description"},[r("small",[t._v(t._s(t.product.manufacturer&&t.product.manufacturer.name))]),t._v(" "),r("h3",[t._v(t._s(t.product.name))]),t._v(" "),r("p",[t._v("\n            "+t._s(t.product.description)+"\n          ")])]),t._v(" "),r("div",{staticClass:"product-details__price-cart"},[r("p",[t._v("$"+t._s(t.product.price))]),t._v(" "),r("product-button",{attrs:{product:t.product}})],1)])])])])},staticRenderFns:[]},B=r("VU/8")(k,q,!1,null,null,null).exports,Y={created:function(){this.product.name||this.$store.dispatch("productById",this.$route.params.id)},computed:{product:function(){return this.$store.getters.productById(this.$route.params.id)}},components:{"product-details":B}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("product-details",{attrs:{product:this.product,isAdding:!0}})],1)},staticRenderFns:[]},W=r("VU/8")(Y,H,!1,null,null,null).exports,G={data:function(){return{cart:this.$store.state.cart}},components:{productDetails:B}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return this.cart.length>0?e("div",[this._m(0),this._v(" "),this._l(this.cart,function(t){return[e("product-details",{key:t.id,attrs:{product:t}})]})],2):e("div",{staticClass:"title"},[this._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h1",[e("i",{staticClass:"fa fa-superpowers"}),this._v(" Your Cart")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i",{staticClass:"fa fa-superpowers"}),this._v(" Your Cart is Empty")])}]},j=r("VU/8")(G,J,!1,null,null,null).exports,Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"admin-new"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},[e("ul",{staticClass:"admin-menu"},[e("li",[e("router-link",{attrs:{to:"/admin"}},[this._v("View Products")])],1),this._v(" "),e("li",[e("router-link",{attrs:{to:"/admin/new"}},[this._v("New Product")])],1)])]),this._v(" "),e("div",{staticClass:"col-lg-9 col-md-9 col-sm-12 col-xs-12"},[e("router-view")],1)])])])])},staticRenderFns:[]};var z=r("VU/8")(null,Q,!1,function(t){r("rY9O")},null,null).exports,K={props:["model","manufacturers","isEditing"],created:function(){},methods:{saveProduct:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.$emit("save-product",t.model):t.$store.commit("ERROR_MSG",{type:"error",title:"Validation!",content:"Please ensure the form is valid."})})}}},X={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.preventDefault(),t.saveProduct(e)}}},[r("div",{staticClass:"col-lg-5 col-md-5 col-sm-12 col-xs-12"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.model.name,expression:"model.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,error:t.errors.has("name")},attrs:{type:"text",placeholder:"Name",name:"name"},domProps:{value:t.model.name},on:{input:function(e){e.target.composing||t.$set(t.model,"name",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"small text-danger"},[t._v("Name is required")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Price")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.model.price,expression:"model.price"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"form-control":!0,error:t.errors.has("price")},attrs:{type:"number",placeholder:"Price",name:"price"},domProps:{value:t.model.price},on:{input:function(e){e.target.composing||t.$set(t.model,"price",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("price"),expression:"errors.has('price')"}],staticClass:"small text-danger"},[t._v("Price is required")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Manufacturer")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.model.manufacturer,expression:"model.manufacturer"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"form-control":!0,error:t.errors.has("manufacturer")},attrs:{type:"text",name:"manufacturer"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.model,"manufacturer",e.target.multiple?r:r[0])}}},[t._l(t.manufacturers,function(e){return[r("option",{key:e._id,domProps:{value:e,selected:e._id==(t.model.manufacturer&&t.model.manufacturer._id)}},[t._v("\n            "+t._s(e.name)+"\n          ")])]})],2),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("manufacturer"),expression:"errors.has('manufacturer')"}],staticClass:"small text-danger"},[t._v("Manufacturer is required")])])]),t._v(" "),r("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Image")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.model.image,expression:"model.image"},{name:"validate",rawName:"v-validate",value:"required|url",expression:"'required|url'"}],class:{"form-control":!0,error:t.errors.has("image")},attrs:{type:"text",lass:"form-control",placeholder:"Image",name:"image"},domProps:{value:t.model.image},on:{input:function(e){e.target.composing||t.$set(t.model,"image",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("image"),expression:"errors.has('image')"}],staticClass:"small text-danger"},[t._v("Image is required and must be a valid URL")])]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",[t._v("Description")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.description,expression:"model.description"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"form-control":!0,error:t.errors.has("description")},attrs:{type:"number",placeholder:"Description",rows:"5",name:"description"},domProps:{value:t.model.description},on:{input:function(e){e.target.composing||t.$set(t.model,"description",e.target.value)}}}),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("description"),expression:"errors.has('description')"}],staticClass:"small text-danger"},[t._v("Description is required")])]),t._v(" "),r("div",{staticClass:"form-group new-button"},[r("button",{staticClass:"button"},[r("i",{staticClass:"fa fa-pencil"}),t._v(" "),t.isEditing?r("span",[t._v("Update Product")]):r("span",[t._v("Add Product")])])])])])},staticRenderFns:[]},Z=r("VU/8")(K,X,!1,null,null,null).exports,tt={data:function(){return{model:{}}},created:function(){this.$store.dispatch("allManufacturers")},computed:{manufacturers:function(){return this.$store.getters.allManufacturers}},methods:{addProduct:function(t){console.log("model",t),this.$store.dispatch("addProduct",t)}},components:{"product-form":Z}},et={render:function(){var t=this.$createElement;return(this._self._c||t)("product-form",{attrs:{model:this.model,manufacturers:this.manufacturers},on:{"save-product":this.addProduct}})},staticRenderFns:[]},rt=r("VU/8")(tt,et,!1,null,null,null).exports,st={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),r("tbody",t._l(t.products,function(e){return r("tr",{key:e._id},[r("td",[t._v(t._s(e.name))]),t._v(" "),r("td",[t._v("$"+t._s(e.price))]),t._v(" "),r("td",[t._v(t._s(e.manufacturer.name))]),t._v(" "),r("td",[r("router-link",{attrs:{to:"/admin/edit/"+e._id}},[r("i",{staticClass:"fa fa-pencil-square-o"})])],1),t._v(" "),r("td",[r("a",{on:{click:function(r){t.deleteProduct(e._id)}}},[r("i",{staticClass:"fa fa-trash"})])])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Price")]),this._v(" "),e("th",[this._v("Manufacturer")]),this._v(" "),e("th"),this._v(" "),e("th")])])}]},at=r("VU/8")({computed:{products:function(){return this.$store.getters.allProducts}},created:function(){0===this.products.length&&this.$store.dispatch("allProducts")},methods:{deleteProduct:function(t){this.$store.dispatch("removeProduct",t)}}},st,!1,null,null,null).exports,ot={created:function(){this.model.name||(console.log("dispatched"),this.$store.dispatch("productById",this.$route.params.id)),0===this.manufacturers.length&&this.$store.dispatch("allManufacturers")},computed:{manufacturers:function(){return this.$store.getters.allManufacturers},model:function(){var t=this.$store.getters.productById(this.$route.params.id);return c()({},t)}},methods:{updateProduct:function(t){console.log("model",t),this.$store.dispatch("updateProduct",t),this.$router.push({name:"Admin"})}},components:{"product-form":Z}},nt={render:function(){var t=this.$createElement;return(this._self._c||t)("product-form",{attrs:{model:this.model,manufacturers:this.manufacturers,isEditing:!0},on:{"save-product":this.updateProduct}})},staticRenderFns:[]},it=r("VU/8")(ot,nt,!1,null,null,null).exports;n.a.use(O.a);var ct=new O.a({routes:[{path:"/",name:"Home",component:I},{path:"/cart",name:"Cart",component:j},{path:"/details/:id",name:"Details",component:W},{path:"/admin",name:"Admin",component:z,children:[{path:"new",name:"New",component:rt},{path:"",name:"Products",component:at},{path:"edit/:id",name:"Edit",component:it}]}]});n.a.config.productionTip=!1,n.a.use(R.a),new n.a({el:"#app",store:U,router:ct,render:function(t){return t(x)}})},WlOm:function(t,e){},rY9O:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1616e4feade72a892f2b.js.map